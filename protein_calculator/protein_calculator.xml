<tool id="protein_calculator" name="Protein Calculator" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" python_template_version="3.5" profile="21.05" license="MIT">
    <description>by the VIB Protein Core</description>
    <macros>
        <token name="@TOOL_VERSION@">0.1.0</token>
        <token name="@VERSION_SUFFIX@">0</token>
    </macros>
    <requirements>
        <requirement type="package" version="3.9">python</requirement>
        <requirement type="package" version="2.2.3">pandas</requirement>
        <requirement type="package" version="6.0.1">plotly</requirement>
        <requirement type="package" version="1.85">biopython</requirement>
        <requirement type="package" version="3.1.6">jinja2</requirement>
    </requirements>
    <stdio>
        <regex match="Error" source="both" level="fatal" description="Protein sequence contains invalid character(s). Please enter a valid Protein Sequence."/>
    </stdio>
    <command detect_errors="exit_code"><![CDATA[
        cp -r "$__tool_directory__/templates" . &&
        python '$__tool_directory__/main.py'
    #if $name:
        --name '$name'
    #else:
        echo "Error: Protein name is required." >&2
        exit 1
    #end if

    #if $sequence:
        --sequence '$sequence'
    #else:
        echo "Error: Protein sequence is required." >&2
        exit 1
    #end if
    ]]></command>
    <inputs>
        <param argument="--name" type="text" label="protein name" help="Name of the protein" optional="false" />
        <param argument="--sequence" type="text" label="protein sequence" help="Sequence to be processed" optional="false"/>

    </inputs>
    <outputs>
        <data name="output1" format="html" from_work_dir="report.html" label="report" />
        <data name="output2" format="html" from_work_dir="plot.html" label="plot" />
    </outputs>
    <tests>
        <test>
            <param name="name" value="Protein1"/>
            <param name="sequence" value="LLLLLLEEEEEVVVV"/>
            <output name="output1" file="report.html" lines_diff="24"/>
            <output name="output2" file="plot.html" lines_diff="2"/>
        </test>
    </tests>
    <help><![CDATA[
        usage: main.py [-h] --name NAME --sequence SEQUENCE

This tool will determine protein properties based on the amino acid sequence. The maximum allowed sequence is set at 3.000 amino acids.

optional arguments:
  -h, --help                           show this help message and exit  

  --name NAME                          Name of the protein  

  --sequence SEQUENCE                  Sequence to be processed

  -v, --version                        show the version of the tool and exit
  

    ]]></help>
    <citations>
        <citation type="bibtex">
@misc{githubProtein_Calculator,
  author = {Balcaen, Kevin and Fonteyn, Robbe},
  year = {2025},
  title = {Protein_Calculator},
  publisher = {GitHub},
  journal = {GitHub repository},
  url = {https://github.com/KBalcaen/Protein_Calculator},
}</citation>
    </citations>
</tool>
